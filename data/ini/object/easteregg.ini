;------------------------------------------------------------------------------
;
;	EASTEREGG.ini
;
;------------------------------------------------------------------------------

Object EasterEgg
	; *** ART Parameters ***
	Scale = 1.2
		; *** ART Parameters ***
    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HPBalrog
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = HIBalrog

	Draw = W3DScriptedModelDraw ModuleTag_HullDraw

		ExtraPublicBone		= Arrow
		ExtraPublicBone		= FLAME00
		ExtraPublicBone		= HEADH00

		DefaultModelConditionState
			Model = AUEstrEgg
			WeaponLaunchBone = PRIMARY Arrow
		End

	End


	; ***DESIGN parameters ***
	Side				= All
	EditorSorting		= UNIT
	ThreatLevel			= ELVEN_SHIP_THREAT_LEVEL
	TransportSlotCount	= TRANSPORTSLOTCOUNT_NOT_TRANSPORTABLE

	HealthBoxScale			= 1.0
	HealthBoxHeightOffset	= -20

	BountyValue			= EVILMEN_BLACKRIDER_BOUNTY_VALUE
	

	VisionRange			= 10000
	ShroudClearingRange	= 10000

	CrushableLevel		= 10							;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel		= 10
	CommandPoints		= 50
	CommandSet			= EasterEggCommandSet
	BuildTime			= 0
	BuildCost			= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS							; No reacting to meta impacting for us
	BuildFadeInOnCreateTime = 2


	; *** AUDIO Parameters ***;

	VoiceAttack							= DrogothVoxAttack
	VoiceAttackCharge					= DrogothVoxAttackCharge
	VoiceCreated						= EVA:DrogothCreated
	VoiceFullyCreated					= EVA:DrogothCreated
	VoiceFear							= EVA:DrogothHelpMe
	VoiceGuard							= DrogothVoxMoveMS
	VoiceMove							= DrogothVoxMoveMS
	VoicePriority						= 90
	VoiceSelect							= DrogothVoxSelect

	VoiceEnterStateAttack				= DrogothVoxEnterStateAttack
	VoiceEnterStateAttackCharge			= DrogothVoxEnterStateAttackCharge
	VoiceEnterStateAttackStructure		= DrogothVoxEnterStateAttackBuilding

	SoundAmbient						= DrogothVoxAmbientLoop
	SoundImpact							= ImpactHorse
	SoundMoveStart						= FellBeastMoveStart
  
	;UnitSpecificSounds
	;End

    ;#include "\includes\StandardUnitEvaEvents.inc"
	EvaEventDieOwner		= DrogothDie			;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
		ModelCondition = Required:SPECIAL_WEAPON_TWO	Excluded:DYING Sound:DrogothIncinerateMS
		ModelCondition = Required:SPECIAL_WEAPON_THREE	Excluded:DYING Sound:DrogothWingBlastLoop
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound: FellBeastWingFlaps			Animation:WUDrogoth_SKL.WUDrogoth_FLYA 	Frames: 1
		AnimationSound = Sound: FellBeastWingFlaps			Animation:WUDrogoth_SKL.WUDrogoth_FLYB 	Frames: 1
		AnimationSound = Sound: FellBeastWingFlaps			Animation:WUDrogoth_SKL.WUDrogoth_FLYC 	Frames: 1 43 91
		AnimationSound = Sound: FellBeastWingFlapsShort		Animation:WUDrogoth_SKL.WUDrogoth_HITA 	Frames: 11
		AnimationSound = Sound: FellBeastWingFlaps			Animation:WUDrogoth_SKL.WUDrogoth_LVLA 	Frames: 1 42
		AnimationSound = Sound: DrogothVoxVeterancy			Animation:WUDrogoth_SKL.WUDrogoth_LVLA 	Frames: 15
		AnimationSound = Sound: FellBeastWingFlapsShort		Animation:WUDrogoth_SKL.WUDrogoth_SPC1 	Frames: 1 22		;WingBlast start
		AnimationSound = Sound: DrogothWingBlastWingFlaps	Animation:WUDrogoth_SKL.WUDrogoth_SPC1 	Frames: 56			;WingBlast start
		AnimationSound = Sound: DrogothWingBlastWingFlaps	Animation:WUDrogoth_SKL.WUDrogoth_SPC2 	Frames: 0			;WingBlast end
		AnimationSound = Sound: FellBeastWingFlapsShort		Animation:WUDrogoth_SKL.WUDrogoth_SPC3 	Frames: 1			;WingBlast
		AnimationSound = Sound: FellBeastWingFlaps			Animation:WUDrogoth_SKL.WUDrogoth_SPCA 	Frames: 1 41		;Fireball
		AnimationSound = Sound: FellBeastWingFlaps			Animation:WUDrogoth_SKL.WUDrogoth_SPCB 	Frames: 1 37 71 106 ;Incinerate
		AnimationSound = Sound: FellBeastWingFlaps			Animation:WUDrogoth_SKL.WUDrogoth_SPCF 	Frames: 1			;Fireflight
		AnimationSound = Sound: DrogothWingBlastWingFlaps	Animation:WUDrogoth_SKL.WUDrogoth_SPCF 	Frames: 28			;Fireflight
	End


	; *** ENGINEERING Parameters ***
	RadarPriority	= UNIT
	ThingClass		= CAVALRY_UNIT
	KindOf			= PRELOAD SELECTABLE CAN_CAST_REFLECTIONS SCORE GARRISON LARGE_RECTANGLE_PATHFIND CAN_ATTACK SHIP HAS_HEALTH_BAR
	
	Body = ActiveBody ModuleTag_02
		MaxHealth			= 100000
	End

	Behavior = AIUpdateInterface ModuleTag_AI
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		AILuaEventsList				= GoodShipFunctions
	End
	
	Behavior = CreateObjectDie ModuleTag_SplashFX
		CreationList		= OCL_BoatDeathSplashBack		
	End
	Behavior = CreateObjectDie ModuleTag_SplashFX2
		CreationList		= OCL_BoatDeathSplashFront
	End
	
	WeaponSet
		Conditions	= None 
		Weapon		= PRIMARY DwarvenFortressOilCasksWeapon ;ShipMissileRangefinder
		Weapon		= TERTIARY	  MordorArcherMissileHordeRangefinder
	End

	ArmorSet
		Conditions      = None
		Armor           = InvulnerableArmor
		DamageFX        = None
	End

	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_HERO_SPEED
	End
	
	
	Behavior = PhysicsBehavior ModuleTag_04
	End
	
	Behavior = SquishCollide ModuleTag_06
	End
	
	Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
	End

	Behavior = ShipSlowDeathBehavior ModuleTag_Death
		DeathTypes			= ALL 
		SinkDelay			= 0
		SinkRate			= 12.0     ; in Dist/Sec
		DestructionDelay	= 10000
		;Sound				= INITIAL GoodShipBattleSinkMS
	End

	Behavior = ProductionUpdate ModuleTag_UpgradeProducer
		GiveNoXP = Yes
	End

	;------------------- HEALING -----------------------------------------------------------------------
	Behavior = AutoHealBehavior ModuleTag_CirdansCraftwork
		StartsActive				= Yes
		TriggeredBy					= Upgrade_CirdansCraftwork
		HealingAmount				= GOOD_SHIP_REGEN_AMOUNT
		HealingDelay				= GOOD_SHIP_REGEN_DELAY
		StartHealingDelay			= GOOD_SHIP_HEAL_DELAY
		HealOnlyIfNotInCombat		= No
	End
	
	// Oil Casks special power, bought as improvement
	Behavior = SpecialPowerModule ModuleTag_OilStarter       
		SpecialPowerTemplate      = SpecialAbilityDwarvenFortressOilCasks
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = No
		;InitiateSound				= OilCaskFlyBy	;this didn't work
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_OilWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityDwarvenFortressOilCasks
		WhichSpecialWeapon		= 1

		UnpackTime              = 1000 
		PackTime                = 1000
		
		SpecialWeapon			= DwarvenFortressOilCasksWeapon
	End

	Behavior = HordeTransportContain  ModuleTag_12
		ObjectStatusOfContained				= UNSELECTABLE UNATTACKABLE CAN_ATTACK ENCLOSED
		;PassengersTestCollisionHeight		= 80
		Slots								= 1
		EnterSound							= GarrisonEnter
		ExitSound							= GarrisonExit
		DamagePercentToUnits				= 0%
		PassengerFilter						= NONE +MordorHaradrimArcherHordeOnMumakil
		AllowOwnPlayerInsideOverride		= Yes ; Normally, the Allies check encompasses OwnPlayer.  but we reeeeally only want our own guys.
		AllowAlliesInside					= No
		AllowEnemiesInside					= No
		AllowNeutralInside					= No
		ExitDelay							= 0
		NumberOfExitPaths					= 2 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
		ForceOrientationContainer			= No  ; otherwise contained units can't orient themselves towards their targets...
		PassengerBonePrefix					= PassengerBone:DockAction      KindOf:HERO
		PassengerBonePrefix					= PassengerBone:B_BANNER KindOf:BANNER
		PassengerBonePrefix					= PassengerBone:HEADH00  KindOf:INFANTRY 
		ShowPips = No
		EjectPassengersOnDeath				= Yes
		
		FadeFilter	= ALL
		FadePassengerOnEnter = Yes
		EnterFadeTime = 6000
		FadePassengerOnExit = Yes
		ExitFadeTime = 1000
		
		InitialPayload						= EasterEggArcherHordeContained 1 ;EasterEggCatapult 20 ;MordorHaradrimArcherHordeOnMumakil 1
	End

	;Behavior = HordeTransportContain  ModuleTag_TransportContain
	;	ObjectStatusOfContained				= UNSELECTABLE CAN_ATTACK ENCLOSED
	;	Slots								= 20
	;	EnterSound							= GarrisonEnter
	;	ExitSound							= GarrisonExit
	;	DamagePercentToUnits				= 0%
	;	PassengerFilter						= ALL
	;	AllowOwnPlayerInsideOverride		= Yes ; Normally, the Allies check encompasses OwnPlayer.  but we reeeeally only want our own guys.
	;	AllowAlliesInside					= No
	;	AllowEnemiesInside					= No
	;	AllowNeutralInside					= No
	;	ExitDelay							= 0
	;	NumberOfExitPaths					= 0		;2 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
	;	ForceOrientationContainer			= No	; otherwise contained units can't orient themselves towards their targets...
	;	PassengerBonePrefix					= PassengerBone:HEADH00 KindOf:MACHINE
	;	ShowPips							= No
	;	EjectPassengersOnDeath				= No
	;	InitialPayload				= EasterEggCatapult 20


		;FadeFilter				= ALL
		;FadePassengerOnEnter	= Yes
		;EnterFadeTime			= 1000
		;FadePassengerOnExit		= Yes
		;ExitFadeTime			= 1000
	;End

	;/////////////////////////
	;// AISpecialPowers
	;/////////////////////////
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End


	GeometryIsSmall		= No
	
	Geometry			= BOX
	GeometryMajorRadius = 100.0
	GeometryMinorRadius = 30.0
	GeometryHeight		= 60.0
	
	
	; Contact point corners are slightly smaller than the geometry, as this
	; fits the mesh better.
	
	GeometryContactPoint = X:-95.0	Y:25.0	Z:60		; 1
	GeometryContactPoint = X:95.0	Y:25.0	Z:0			; 8
	GeometryContactPoint = X:95.0	Y:25.0	Z:60		; 5
	GeometryContactPoint = X:-95.0	Y:-25.0	Z:0			; 3
	GeometryContactPoint = X:95.0	Y:-25.0	Z:60		; 6
	GeometryContactPoint = X:95.0	Y:-25.0	Z:0			; 7
	GeometryContactPoint = X:-95.0	Y:-25.0	Z:60		; 2
	GeometryContactPoint = X:-95.0	Y:25.0	Z:0			; 4
	
	Shadow = SHADOW_VOLUME

End
//--------------------------------------------------------------------------------------------------------------------------------------------
// aka Catapult
Object EasterEggCatapult_Base    
                     ;BALANCE Catapult 
; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = BMGreatSiegeWorks_Catapult
  
  SelectPortrait         = UPMordor_CatapultNew

  Draw = W3DTruckDraw ModuleTag_01
  
	WadingParticleSys = EntRipples

  	  OkToChangeModelColor = Yes
  	  
  	  StaticModelLODMode = Yes
  
     DefaultModelConditionState
      Model               = MUCatapult_SKN
      WeaponLaunchBone    = PRIMARY Projectile
      WeaponLaunchBone	  = SECONDARY Projectile
	  End
	  IdleAnimationState
	    Animation = Idle1
        AnimationName       = MUCatapult_SKL.MUCatapult_IDLA
        AnimationMode       = ONCE
        AnimationBlendTime  = 15
      End
	    Animation = Idle1
        AnimationName       = MUCatapult_SKL.MUCatapult_IDLB
        AnimationMode       = ONCE
        AnimationBlendTime  = 15
      End
	    Animation = Idle1
        AnimationName       = MUCatapult_SKL.MUCatapult_IDLC
        AnimationMode       = ONCE
        AnimationBlendTime  = 15
      End
      BeginScript
        CurDrawableHideSubObject("ProjectileRock")
        ;;;;CurDrawableHideSubObject("BoneProjectile");; no such bone
      EndScript
    End
    
    ModelConditionState = DYING
			Model               = MUCatapltD_SKN
			WeaponLaunchBone    = PRIMARY Projectile
		End
    
    AnimationState      = DYING
			Animation         = MUCataplt_DIEA
				AnimationName   = MUCatapltD_SKL.MUCatapltD_ANM
				AnimationMode   = ONCE
			End
		End		
    
		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUCatapult_SKL.MUCatapult_IDLA
				AnimationMode				= LOOP
			End
		End
		
    ModelConditionState =JUST_BUILT
		Model	=  MUCatapult_A
    End
    
    AnimationState  = JUST_BUILT
      Animation			= Being_Built
        AnimationName		= MUCatapult_A.MUCatapult_A
        AnimationMode		= ONCE
      End
    End
    
    AnimationState				=	MOVING BACKING_UP WADING
		Animation				=	BackingUp
			AnimationName           = MUCatapult_SKL.MUCatapult_BAKA
			AnimationMode       = LOOP
			AnimationSpeedFactorRange = 2.0 2.0           ; get those legs pumping!
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToBackUp")
			end
		EndScript
    End

    AnimationState        = TURN_LEFT WADING
		Animation = TurningLeft
			AnimationName           = MUCatapult_SKL.MUCatapult_TRNL
			AnimationMode       = LOOP
			AnimationSpeedFactorRange = 1.5 1.5
			AnimationBlendTime	= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToTurnLeft")
			end
		EndScript
    End

    AnimationState        = TURN_RIGHT WADING
		Animation = TurningRight
			AnimationName           = MUCatapult_SKL.MUCatapult_TRNR
			AnimationSpeedFactorRange = 1.5 1.5
			AnimationMode       = LOOP
			AnimationBlendTime	= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToTurnRight")
			end
		EndScript
    End
    
	AnimationState						= MOVING WADING
		Animation						= Move
		    AnimationName				= MUCatapult_SKL.MUCatapult_MOVA
	        AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 2.0 2.0           ; get those legs pumping!
			AnimationBlendTime			= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToMove")
			end
		EndScript
    End

    AnimationState				=	MOVING BACKING_UP
		Animation				=	BackingUp
			AnimationName           = MUCatapult_SKL.MUCatapult_BAKA
			AnimationMode       = LOOP
			AnimationSpeedFactorRange = 2.0 2.0           ; get those legs pumping!
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToBackUp")
			end
		EndScript
    End

    AnimationState        = TURN_LEFT 
		Animation = TurningLeft
			AnimationName           = MUCatapult_SKL.MUCatapult_TRNL
			AnimationMode       = LOOP
			AnimationSpeedFactorRange = 1.5 1.5
			AnimationBlendTime	= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToTurnLeft")
			end
		EndScript
    End

    AnimationState        = TURN_RIGHT 
		Animation = TurningRight
			AnimationName           = MUCatapult_SKL.MUCatapult_TRNR
			AnimationSpeedFactorRange = 1.5 1.5
			AnimationMode       = LOOP
			AnimationBlendTime	= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToTurnRight")
			end
		EndScript
    End
    
	AnimationState						= MOVING
		Animation						= Move
		    AnimationName				= MUCatapult_SKL.MUCatapult_MOVA
	        AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 2.0 2.0           ; get those legs pumping!
			AnimationBlendTime			= 15
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Attack" then
				CurDrawableSetTransitionAnimState("TransToMove")
			end
		EndScript
    End

   	AnimationState		= FIRING_OR_PREATTACK_A 
		StateName			= Attack
		Animation			= ATKA
			AnimationName           = MUCatapult_SKL.MUCatapult_ATKA
			AnimationMode       = ONCE
			UseWeaponTiming	= Yes
		End
		FrameForPristineBonePositions = 24
		ParticleSysBone     = Projectile FlamingRockStart FollowBone:Yes 
		ParticleSysBone     = Projectile FlamingRockLenzflareStart FollowBone:Yes 
	End

	AnimationState			= FIRING_OR_PREATTACK_B
		StateName			= Attack
		Animation			= ATKB
			AnimationName   = MUCatapult_SKL.MUCatapult_ATKA
			AnimationMode   = ONCE
			UseWeaponTiming	= Yes
		End
		BeginScript
			CurDrawableShowSubObject("BoneProjectile")
		EndScript
		FrameForPristineBonePositions = 24
	End
    
    ; --------- Click and Hit Reactions ------------	
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUCatapult_SKL.MUCatapult_HITA
				AnimationMode = ONCE
			End
		End
		
		
		TransitionState = TransToBackUp
			Animation = BAKA
				AnimationName = MUCatapult_SKL.MUCatapult_BAKA
				AnimationMode = ONCE
				AnimationSpeedFactorRange = 2.0 2.0
				AnimationBlendTime	=	30
			End
		End
		
		TransitionState = TransToMove
			Animation = MOVA
				AnimationName = MUCatapult_SKL.MUCatapult_MOVA
				AnimationMode = ONCE
				AnimationSpeedFactorRange = 2.0 2.0
				AnimationBlendTime	=	30
			End
		End
		
		TransitionState = TransToTurnLeft
			Animation = TRNL
				AnimationName = MUCatapult_SKL.MUCatapult_TRNL
				AnimationMode = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime	=	30
			End
		End
		
		TransitionState = TransToTurnRight
			Animation = TRNR
				AnimationName = MUCatapult_SKL.MUCatapult_TRNR
				AnimationMode = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
				AnimationBlendTime	=	30
			End
		End

;;;;;;;;;; SUDDEN DEMO FIX ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;; Taken out due to missing animations associated with the MUCatpD ;;;;;;;;;;;;
;    ModelConditionState        = DAMAGED
;      Model               = MUCatpD
;    End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

    TrackMarks = EXTireTrack2_Temp.tga
    TrackMarksLeftBone = WheelL02
    TrackMarksRightBone = WheelR02



    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = WheelL01
    RightFrontTireBone          = WheelR01
    LeftRearTireBone            = WheelL02
    RightRearTireBone           = WheelR02
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

    ParticlesAttachedToAnimatedBones = Yes

 End

	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING
			ParticleSysBone     = WheelL02 FootstepSlash
			ParticleSysBone     = WheelR02 FootstepSlash
	    End
	    AnimationState        = TURN_RIGHT
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	    AnimationState        = TURN_LEFT
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	    AnimationState = MOVING
			ParticleSysBone     = WheelL02 GenericSiegeTrailDust
			ParticleSysBone     = WheelR02 GenericSiegeTrailDust
	    End
	End
 
 
    	;#include "..\..\..\includes\StunDrawModuleLarge.inc"


; ***DESIGN parameters *** 

	Side				= Mordor
	EditorSorting			= UNIT
	
	ThreatLevel			= MORDOR_CATAPULT_THREAT_LEVEL
	ThreatBreakdown MordorCatapult_DetailedThreat
		AIKindOf 		= SIEGEWEAPON
	End
	
	TransportSlotCount		= TRANSPORTSLOTCOUNT_SIEGE
	ShowHealthInSelectionDecal 	= Yes
	ThingClass			= MACHINE
	
	CommandSet			= MordorCatapultCommandSet
	CommandPoints 			= 25

	Behavior = MonitorConditionUpdate MonitorConditionUpdateModuleTag
		ModelConditionFlags 	= ATTACKING_POSITION
		ModelConditionCommandSet = MordorCatapultCommandSetStopBombard
	End

	WeaponSet
		Conditions          	= None
		Weapon              	= PRIMARY     MordorCatapultRock
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		Weapon			= SECONDARY	MordorCatapultHumanHeads
		AutoChooseSources	= SECONDARY NONE

	End
  
	ArmorSet
		Conditions      = None
		Armor           = SiegeEngineArmor
		DamageFX        = None
	End
    
    	; This is required so that the build phase lasts as long as the anim.
	BuildFadeInOnCreateTime = 16.0
	
  	VisionRange = MORDOR_CATAPULT_VISION_RANGE 
  	ShroudClearingRange = SHROUD_CLEAR_ARTILLERY
  
  	//VisionSide = 35%
	//VisionRear = 25%
	
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 2.0%
  
  	BountyValue = MORDOR_CATAPULT_BOUNTY_VALUE 
  	DisplayName = OBJECT:MordorCatapult
  	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  	CrusherLevel   = 0  ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  	ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

	; *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType     = AutoResolveUnit_Siege
	AutoResolveCombatChain  = AutoResolve_SiegeCombatChain
	AutoResolveBody         = AutoResolve_MordorCatapultBody
	
	AutoResolveArmor
		Armor = AutoResolve_MordorCatapultArmor
	End

	AutoResolveWeapon
		Weapon = AutoResolve_MordorCatapultWeapon
	End


; *** AUDIO Parameters ***;

	VoiceAttack			= CatapultVoiceAttackMS
	VoiceAttackMachine		= CatapultVoiceAttackMS
	VoiceAttackStructure		= CatapultVoiceAttackBuilding
	VoiceCreated			= EVA:CatapultCreated
	VoiceFullyCreated 		= EVA:CatapultCreated
	VoiceGuard			= CatapultVoiceMoveMS
	VoiceMove			= CatapultVoiceMoveMS
	VoiceMoveToCamp			= CatapultVoiceMoveMS
	VoicePriority			= 28
	VoiceSelect			= CatapultVoiceSelectMS
	VoiceSelectBattle 		= CatapultVoiceSelectBattle

	VoiceEnterStateAttack		= CatapultVoiceEnterStateAttack
	VoiceEnterStateAttackMachine	= CatapultVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= CatapultVoiceEnterStateAttackBuilding
	VoiceEnterStateMove		= CatapultVoiceEnterStateMove
	VoiceEnterStateMoveToCamp	= CatapultVoiceEnterStateMove
	
	SoundMoveLoop			= CatapultMoveLoop
	SoundMoveStart			= CatapultMoveStart
	;SoundOnDamaged			= UnitDamageWoodLight
	SoundOnReallyDamaged		= UnitDamageWoodHeavy
	
	UnitSpecificSounds
		VoiceGarrison				= CatapultVoiceMoveMS
		VoiceEnterUnitSlaughterHouse		= CatapultVoiceMoveMS
		VoiceEnterUnitEvilMenTransportShip	= CatapultVoiceMoveMS
		VoiceEnterUnitTransportShip		= CatapultVoiceMoveMS
		VoiceInitiateCaptureBuilding		= OrcHordeVoiceCaptureBuilding
	End

    ;#include "..\..\..\includes\StandardUnitEvaEvents.inc"

	CrowdResponseKey = Orc

	ClientBehavior 		= ModelConditionAudioLoopClientBehavior ModuleTag_foo
		ModelCondition 	= Required:RAISING_FLAG			Excluded:DYING ENGAGED	Sound:EmotionOrcCompilationVoxTauntSinglesLoop
	End

	Behavior 	= LargeGroupAudioUpdate ModuleTag_LGAU		; Tie into LargeGroupAudio system
		Key 	= SiegeWeapon Catapult
	End

	ClientBehavior 			= AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap 	= 800
		AnimationSound 		= Sound:CatapultCreate		Animation:MUCatapult_A.MUCatapult_A		Frames:130
		AnimationSound 		= Sound:BodyFallOrc		Animation:MUCatapltD_SKL.MUCatapltD_ANM	Frames:35
	End
	
; *** ENGINEERING Parameters ***

	RadarPriority 			= UNIT
	KindOf 				= PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MACHINE SCORE CAN_ATTACK CAN_ATTACK_WALLS TROLL_BUFF_NUGGET HEAVY_MELEE_HITTER ARMY_SUMMARY SIEGEENGINE
	CamouflageDetectionMultiplier 	= CAMOUFLAGE_DETECTION_DISTANCE_SHORTISH
	
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = MORDOR_CATAPULT_HEALTH
		MaxHealthDamaged  = MORDOR_CATAPULT_HEALTH_DAMAGED
	End
 
    BuildCost = MORDOR_CATAPULT_BUILDCOST
    BuildTime = MORDOR_CATAPULT_BUILDTIME

        Behavior 	= StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate 	= Artillery
        End


	Behavior = GrantUpgradeCreate ModuleTag_HumanHeads
		UpgradeToGrant = Upgrade_CatapultHumanHeads
	End

; 	Behavior = WeaponSetUpgrade ModuleTag_HumanHeadsUpgrade
;		TriggeredBy = Upgrade_CatapultHumanHeads
;	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS ;Yes
		AILuaEventsList	=	CatapultFunctions
	End

	LocomotorSet
		Locomotor = CatapultLocomotor
		Condition = SET_NORMAL
		Speed     = NORMAL_SIEGE_MED_MEMBER_SPEED ; originally 30  ;16
	End

	Behavior = PhysicsBehavior ModuleTag_04
	End

	;Behavior 	= SlowDeathBehavior ModuleTag_05
	;	DeathTypes 		= ALL +EXPLODED +BURNED
	;	SinkDelay 		= 3000
	;	SinkRate 		= 0.40     ; in Dist/Sec
	;	DestructionDelay 	= 8000  ;8000
	;	;OCL 			= FINAL OCL_MordorCatapultExplodeDeath
	;	;FX 			= INITIAL FX_CatapultDieExplosion
	;	Sound 			= INITIAL	OrcVoiceDie
	;End

	Behavior 	= SlowDeathBehavior ModuleTag_06 
		DeathTypes 		= ALL
		SinkDelay 		= 3000
		SinkRate 		= 1.20     ; in Dist/Sec
		DestructionDelay 	= 28000  ;8000
		;OCL 			= FINAL OCL_MordorCatapultDeath
		FX 			= INITIAL FX_CatapultDie
		Sound 			= INITIAL	OrcVoiceDie
	End

	Behavior = SquishCollide ModuleTag_07
		;nothing
	End

	Behavior = TransitionDamageFX ModuleTag_8
	;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:FireBuildingLarge        ; persistant damage effect
		ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_GondorCatapultTransitionMedium  ; damage impact particle effect
	;   ReallyDamagedOCL1 = Loc: X:0 Y:0 Z:0 OCL:OCL_FireFieldSmall                           ; spawn debris and splinters
	End

  	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2000 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 10.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25000.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50000.0  ; level 3 (heavy  damage) threshold trigger
	End



	;///////////////////
	;// AISpecialPowers
	;////////////////////
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End


 
  Geometry = BOX
  GeometryMajorRadius = 29.0
  GeometryMinorRadius = 15.0	
  GeometryHeight = 30.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
;  HealthBoxHeightOffset		= 20.0
End

//--------------------------------------------------------------------------------------------------------------------------------------------
ChildObject EasterEggCatapult EasterEggCatapult_Base

	Draw = W3DTruckDraw ModuleTag_01
		DefaultModelConditionState
			Model = None
		End
	End

	//No points for this its free
	CommandPoints		= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	ArmorSet
		Conditions      = None
		Armor           = InvulnerableArmor
		DamageFX        = None
	End
	
	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY     EasterEggCatapultRock  
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI

	End

	VisionSide	= 100%
	VisionRear	= 100%

	; No SCORE
	KindOf = PRELOAD IMMOBILE UNATTACKABLE CAN_CAST_REFLECTIONS NOT_AUTOACQUIRABLE INFANTRY ARCHER ATTACK_NEEDS_LINE_OF_SIGHT HIDE_IF_FOGGED

	LocomotorSet
		Locomotor = FloatingCatapultLocomotor
		Condition = SET_NORMAL
		Speed     = 0
	End

	; *** AUDIO Parameters ***;

	VoiceAttack								= CatapultVoiceSelect2
	VoiceAttackMachine						= CatapultVoiceSelect2
	VoiceAttackStructure					= CatapultVoiceSelect2
	VoiceCreated							= TrebuchetCreated
	VoiceFullyCreated 						= NoSound
	VoiceGuard								= NoSound
	VoiceMove								= NoSound
	VoiceMoveToCamp							= NoSound
	VoicePriority							= 28
	VoiceSelect								= CatapultVoiceSelect2
	VoiceSelectBattle 						= CatapultVoiceSelect2

	VoiceEnterStateAttack					= CatapultVoiceSelect2
	VoiceEnterStateAttackMachine			= CatapultVoiceSelect2
	VoiceEnterStateAttackStructure			= CatapultVoiceSelect2
	VoiceEnterStateMove						= NoSound
	VoiceEnterStateMoveToCamp				= NoSound
	
	SoundMoveLoop							= NoSound
	SoundMoveStart							= CatapultMoveStart
	
	UnitSpecificSounds
		VoiceGarrison						= NoSound
		VoiceEnterUnitSlaughterHouse		= NoSound
		VoiceEnterUnitEvilMenTransportShip	= NoSound
		VoiceEnterUnitTransportShip			= NoSound
		VoiceInitiateCaptureBuilding		= NoSound
	End

    ;#include "..\..\..\includes\StandardUnitEvaEvents.inc"

	//We should die when the fortress does!
	Behavior = SlavedUpdate ModuleTag_Slave
		DieOnMastersDeath	= Yes
		MarkUnselectable	= No
	End
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		CanAttackWhileContained		= Yes
		AILuaEventsList				= CatapultFunctions
	End
End

//------------------------------------------------------------------------------
// 
Object EasterEggArcher

	//This is required for garrisoned objects - please put in all objects.
	ButtonImage = WOR_HaradrimArcher

	SelectPortrait         = UPMordor_Haradrim
	//SelectPortrait         = SP_Haradrim

	// *** ART Parameters ***
	//note all file names are MUHaradim, not MUHaradrim, so as not to exceed character limits
	Draw = W3DHordeModelDraw ModuleTag_01
		StaticModelLODMode		= Yes // Will append M or L to the skin name depending on GameLOD
		OkToChangeModelColor	= Yes
		
		; specify options for static LODs
		LodOptions							= LOW
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions							= MEDIUM
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions							= HIGH
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_HIGH
		End

		WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.	  
		  
		DefaultModelConditionState
			Model = MUHaradim_SKN
			Skeleton = MUHaradim_SKL
			WeaponLaunchBone = PRIMARY ARRROW
			WeaponLaunchBone = TERTIARY ARRROW
			WeaponLaunchBone = QUINARY ARRROW
		End

		IdleAnimationState
			Animation = IDLA
				AnimationName = MUHaradim_IDLA
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
				AnimationPriority = 25
			End
			Animation = IDLB
				AnimationName = MUHaradim_IDLB
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
			End
			Animation = IDLC
				AnimationName = MUHaradim_IDLC
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
			End
			StateName = Idle
			BeginScript
				CurDrawableShowSubObject("arrrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Idle") end
			EndScript			
		End
	 
		AnimationState = THROWN_PROJECTILE
			Animation = Thrown
				AnimationName = MUHaradim_FLYA
				AnimationMode = LOOP
			End
			Animation = Thrown
				AnimationName = MUHaradim_FLYB
				AnimationMode = LOOP
			End
			Animation = Thrown
				AnimationName = MUHaradim_FLYC
				AnimationMode = LOOP
			End
		End

		AnimationState = STUNNED_FLAILING
 			Animation = Flying
				AnimationName = MUHaradim_FLYA
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
 			Animation = Flying
				AnimationName = MUHaradim_FLYB
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
 			Animation = Flying
				AnimationName = MUHaradim_FLYC
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags = RANDOMSTART
		End

		AnimationState			= DYING BURNINGDEATH
			Animation
				AnimationName	= MUHaradim_DIEA
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
			Animation
				AnimationName	= MUHaradim_DIEB
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
			Animation
				AnimationName	= MUHaradim_DIEC
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
		End

		AnimationState = DYING SPLATTED
 				Animation = Splattered_On_Ground
					AnimationName = MUHaradim_LNDA
					AnimationMode = ONCE
				End
				EnteringStateFX = FX_HaradrimHitGround
		End

		AnimationState = DYING AFLAME
			Animation = Flaming_Death_1
				AnimationName = MUHaradim_DIEA
				AnimationMode = ONCE
			End
			Animation = Flaming_Death_2
				AnimationName = MUHaradim_DIEB
				AnimationMode = ONCE
			End
			Animation = Flaming_Death_2
				AnimationName = MUHaradim_DIEC
				AnimationMode = ONCE
			End
			ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
		End

		AnimationState = DYING
			Animation = Dying_1
				AnimationName = MUHaradim_DIEA
				AnimationMode = ONCE
			End
			Animation = Dying_2
				AnimationName = MUHaradim_DIEB
				AnimationMode = ONCE
			End
			Animation = Dying_2
				AnimationName = MUHaradim_DIEC
				AnimationMode = ONCE
			End
		End

		//DOESN'T EXIST
		//AnimationState = TRANSPORT_MOVING
		//	Animation = wobbling_on_transport
		//		AnimationName = MUHaradim_IDLD
		//	    AnimationMode = LOOP
		//      AnimationBlendTime  = 15
		//	End
		//End
	    
		// --- stunned anims
	    
		AnimationState = STUNNED_STANDING_UP
 				Animation = Standing_Back_Up
					AnimationName = MUHaradim_GTPA
			AnimationMode = ONCE_BACKWARDS
			AnimationSpeedFactorRange = 1.5 1.5
				End
		End
	    

		AnimationState = STUNNED
 				Animation = Splattered_On_Ground
					AnimationName = MUHaradim_LNDA
					AnimationMode = ONCE
				End
				EnteringStateFX = FX_HaradrimHitGround
		End

		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= MUHaradim_MFDA
				AnimationMode	= LOOP
				Distance		= 30
			End
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUHaradim_IDLA
				AnimationMode				= LOOP
			End
		End

	; ladder climbing animations
	AnimationState = MOVING CLIMBING BACKING_UP
		Animation = Climbing_Down
			AnimationName = MUHaradim_CLMA
			AnimationMode = LOOP_BACKWARDS
			AnimationSpeedFactorRange = 2.0 2.0
		End
    End

    AnimationState = MOVING CLIMBING
		Animation = Climbing_Up
			AnimationName = MUHaradim_CLMA
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 2.0 2.0
		End
    End

		AnimationState = MOVING DAMAGED AFLAME
			Animation = Moving_Damaged
				AnimationName = MUHaradim_MFDA
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
		End

		AnimationState = MOVING AFLAME
			Animation = Moving
				AnimationName = MUHaradim_MFDA
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
		End

	//	AnimationState = MOVING DAMAGED
	//		Animation = Moving_Damaged
	//			AnimationName = MUHaradim_IWKA
	//		    AnimationMode = LOOP
	//		End
	//		Flags               = RANDOMSTART
	//		ParticleSysBone     = None InfantryDustTrails
	//  End

		AnimationState = MOVING EMOTION_TERROR
			Animation = MovingA
				AnimationName = MUHaradim_RUNC
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
		End
			    
		AnimationState        = MOVING WANDER
			Animation           = WLKA
				AnimationName     = MUHaradim_WLKA
				AnimationMode     = LOOP
			End
			Animation           = WLKB
				AnimationName     = MUHaradim_WLKB
				AnimationMode     = LOOP
			End
		End
		
		AnimationState				= MOVING BACKING_UP
			Animation				= BackingUp
				AnimationName		= MUHaradim_BAKA
				AnimationMode		= LOOP
			End
			Animation				= BackingUp
				AnimationName		= MUHaradim_BAKB
				AnimationMode		= LOOP
			End
			Animation				= BackingUp
				AnimationName		= MUHaradim_BAKC
				AnimationMode		= LOOP
			End
			Flags = RANDOMSTART
		End
		
		AnimationState = MOVING
			Animation = MovingA
				AnimationName = MUHaradim_RUNA
				AnimationMode = LOOP
			End
			Animation = MovingB
				AnimationName = MUHaradim_RUNB
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
		End
	    
	    
		AnimationState					=	FIRING_OR_PREATTACK_E
			Animation
				AnimationName			=	MUHaradim_ATKA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 2.3 2.3
			End
		End

//---------------------------------------------------
		;New style firing
		AnimationState						= PREATTACK_A 
			StateName						= STATE_Firing
			Animation						= ReadyToDrawn
				AnimationName				= MUHaradim_ATA1
				AnimationMode				= ONCE
//				UseWeaponTiming				= Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.5 1.5		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 10			
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= FIRING_OR_RELOADING_A
			StateName						= STATE_Firing
			Animation						= OneFrameOfShooting
				AnimationName				= MUHaradim_ATA2
				AnimationMode				= ONCE
//				UseWeaponTiming				= Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.0 1.0		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 0				// Must be 0 blend time otherwise the arrow will linger for the duration of the blend!
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= PREATTACK_C
			StateName						= STATE_Firing
			Animation						= ReadyToDrawn
				AnimationName				= MUHaradim_ATA1
				AnimationMode				= ONCE
//				UseWeaponTiming				= Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.5 1.5		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 10			
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= FIRING_OR_RELOADING_C
			StateName						= STATE_Firing
			Animation						= OneFrameOfShooting
				AnimationName				= MUHaradim_ATA2
				AnimationMode				= ONCE
//				UseWeaponTiming				= Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.0 1.0   		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 0				// Must be 0 blend time otherwise the arrow will linger for the duration of the blend!
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		;End New style firing

//-------- Persistant firing (keep bow drawn ) ------------
		AnimationState					= CONTINUOUS_FIRE_MEAN
			StateName					=	STATE_Firing
			Animation					=	HangFrameWhileCoasting
				AnimationName			=	MUHaradim_ATA2
				AnimationMode			=	MANUAL
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		
		AnimationState						= CONTINUOUS_FIRE_SLOW
			StateName						= STATE_Idle
			Animation						= PutAwayArrow
				AnimationName				= MUHaradim_ATA3
				AnimationMode				= ONCE
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		
		AnimationState					=	FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
			Animation					=	ATKD
				AnimationName			=	MUHaradim_ATKD 
				AnimationMode			=	ONCE
				UseWeaponTiming			=	Yes
			End
		End
		
		AnimationState = PASSENGER
			Animation = Wiggling
				AnimationName = MUHaradim_FLLA
				AnimationMode = LOOP
			End
		End
	   
	    
		AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = MUHaradim_TNTA
				AnimationMode = LOOP
			End
			Animation = Chant
				AnimationName = MUHaradim_TNTB
				AnimationMode = LOOP
			End
			Animation = Chant
				AnimationName = MUHaradim_TNTC
				AnimationMode = LOOP
			End
		End
				
		//-emotions--
		AnimationState							= EMOTION_AFRAID
			Animation							= FERA
				AnimationName					= MUHaradim_FERA
				AnimationMode					= LOOP
			End
			Animation							= FERA
				AnimationName					= MUHaradim_FERB
				AnimationMode					= LOOP
			End
			Animation							= FERA
				AnimationName					= MUHaradim_FERC
				AnimationMode					= LOOP
			End
			Flags = RANDOMSTART
		End
		
		AnimationState							= EMOTION_TAUNTING
			Animation							= TNTA
				AnimationName					= MUHaradim_TNTA
				AnimationMode					= LOOP
			End
			Animation							= TNTA
				AnimationName					= MUHaradim_TNTB
				AnimationMode					= LOOP
			End
			Animation							= TNTA
				AnimationName					= MUHaradim_TNTC
				AnimationMode					= LOOP
			End
		End
		
		AnimationState							= EMOTION_POINTING
			Animation							= Pointing1A
				AnimationName					= MUHaradim_PNTA
				AnimationMode					= LOOP
			End
		End
		AnimationState							= EMOTION_POINTING
			Animation							= Pointing1B
				AnimationName					= MUHaradim_PNTB
				AnimationMode					= LOOP
			End
		End
		AnimationState							= EMOTION_POINTING
			Animation							= Pointing1C
				AnimationName					= MUHaradim_PNTC
				AnimationMode					= LOOP
			End
		End

		AnimationState							= EMOTION_CELEBRATING
			Animation                           = CHRA
				AnimationName					= MUHaradim_CHRA
				AnimationMode					= ONCE
			End
			Animation                           = CHRA
				AnimationName					= MUHaradim_CHRB
				AnimationMode					= ONCE
			End
			Animation                           = CHRA
				AnimationName					= MUHaradim_CHRC
				AnimationMode					= ONCE
			End
		End

		AnimationState				=	SELECTED
			SimilarRestart			=   Yes
			Animation				=	AtAttention
				AnimationName		=	MUHaradim_ATNB
				AnimationMode		=	LOOP
			End
			StateName				= Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("Idle_to_Selected") end
			EndScript
		End		

		;------------ TRANSITION ANIMS ----------------
		
		TransitionState       = Selected_to_Idle
			Animation           = ATNE
				AnimationName		=	MUHaradim_ATNC
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange	= 2.0 2.0
			End
		End
		
		TransitionState       = Idle_to_Selected
			Animation           = ATND
				AnimationName     = MUHaradim_ATNA
				AnimationMode   =	ONCE
				AnimationSpeedFactorRange	= 2.0 2.0
			End
		End
				
	End

    ;#include "..\..\..\includes\StunDrawModuleSmall.inc"


// ***DESIGN parameters ***

	Side			= Mordor
	EditorSorting		= UNIT
	ThreatLevel		= 1.0
	EmotionRange		= EMOTION_CHEER_RADIUS
 
	TransportSlotCount 	= TRANSPORTSLOTCOUNT_UNIT

	BountyValue = MORDOR_HARADRIM_ARCHER_BOUNTY_VALUE

	WeaponSet
		Conditions 	= None 
		Weapon 		= PRIMARY    HaradrimBow ;GondorRangerBow 
		Weapon 		= TERTIARY   HaradrimBowBombard ;GondorRangerBowBombard 
		Weapon 		= QUINARY    HaradrimBarbedArrow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
		AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT				; Not AI.
	End
	  
;	WeaponSet
;		Conditions = CLOSE_RANGE CONTESTING_BUILDING
;		Weapon 			= PRIMARY    HaradrimBow
;;		Weapon 			= SECONDARY  MordorArcherBowMelee  
;		Weapon 			= TERTIARY   HaradrimBowBombard
;		Weapon 			= QUINARY    HaradrimBarbedArrow
 ;		OnlyAgainst 		= PRIMARY STRUCTURE
;		AutoChooseSources 	= TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
;		AutoChooseSources 	= QUINARY FROM_PLAYER FROM_SCRIPT				; Not AI.
;	End
	  
	ArmorSet
		Conditions      = None
		Armor           = HaradrimArmor
		DamageFX        = NormalDamageFX
	End
	ArmorSet
		Conditions	= PLAYER_UPGRADE
		Armor		= HaradrimHeavyArmor
		DamageFX	= NormalDamageFX
	End
  
	

	ShroudClearingRange 	= SHROUD_CLEAR_STANDARD  	     
	VisionRange 		= MORDOR_HARADRIM_VISION_RANGE
	VisionSide 		= 35%
	VisionRear 		= 25%
	MaxVisionBonusPercent 	= 300%
	VisionBonusTestRadius 	= 200
	VisionBonusPercentPerFoot = 2.0%
	
	DisplayName		= OBJECT:MordorHaradrimArcher
	CrushableLevel		= 0	//What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel		= 0	//What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon	= RangedInfantryCrushRevenge
	CommandSet		= MordorHaradrimArcherCommandSet
	CommandPoints		= 6
 

	// *** AUDIO Parameters ***;

	VoiceAttack			= HaradrimVoiceAttack
	VoiceAttackAir			= HaradrimVoiceAttack
	VoiceAttackCharge		= HaradrimVoiceAttackCharge
	VoiceAttackMachine		= HaradrimVoiceAttack
	VoiceAttackStructure		= HaradrimVoiceAttackBuilding
	VoiceCreated			= EVA:HaradrimCreated
	VoiceFullyCreated 		= EVA:HaradrimCreated
	VoiceMove			= HaradrimVoiceMove
	VoiceMoveToCamp			= HaradrimVoiceMoveCamp
	VoicePriority			= 34
	VoiceRetreatToCastle		= HaradrimVoiceRetreat
	VoiceSelect			= HaradrimVoiceSelectMS
	VoiceSelectBattle 		= HaradrimVoiceSelectBattle
	VoiceGuard			= HaradrimVoiceMove
	

	VoiceEnterStateAttack		= HaradrimVoiceEnterStateAttack
	VoiceEnterStateAttackCharge	= HaradrimVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine	= HaradrimVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure	= HaradrimVoiceEnterStateAttackBuilding
	VoiceEnterStateMove		= HaradrimVoiceEnterStateMove
	VoiceEnterStateMoveToCamp	= HaradrimVoiceEnterStateMoveCamp
	VoiceEnterStateRetreatToCastle	= HaradrimVoiceEnterStateRetreat
	
	UnitSpecificSounds
		VoiceEnter				= HaradrimVoiceGarrison
		VoiceEnterHostile			= HaradrimVoiceGarrison
		VoiceGarrison				= HaradrimVoiceGarrison
		VoiceEnterUnitSlaughterHouse		= HaradrimVoiceGarrisonSlaughterHouse
		VoiceEnterUnitMordorMumakil		= HaradrimVoiceGarrisonMumakil
		VoiceEnterUnitEvilMenTransportShip	= HaradrimVoiceMove
		VoiceInitiateBarbedArrowAttack		= HaradrimVoiceAttack
		VoiceInitiateCaptureBuilding		= HaradrimVoiceCaptureBuilding
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
	      MaxUpdateRangeCap = 800
			AnimationSound = Sound:ArrowDrawBow		Animation:MUHARADIM_SKL.MUHARADIM_ATKA	Frames:34 
			AnimationSound = Sound:ArrowDrawBow 		Animation:MUHARADIM_SKL.MUHARADIM_ATKB	Frames:34
			AnimationSound = Sound:ArrowDrawBow		Animation:MUHARADIM_SKL.MUHARADIM_ATKC	Frames:34
			AnimationSound = Sound:BodyFallSoldier 		Animation:MUHaraLnc_SKL.MUHaraLnc_LNDA 	Frames:2
			AnimationSound = Sound:BodyFallGeneric1 	Animation:MUHaradim_SKL.MUHaradim_DIEA 	Frames:57
			AnimationSound = Sound:BodyFallGeneric1 	Animation:MUHaradim_SKL.MUHaradim_DIEB 	Frames:78
	End

	CrowdResponseKey = EvilMen2

	ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
		ModelCondition = Required:EMOTION_CELEBRATING	Excluded:DYING ENGAGED	Sound:EmotionHaradrimVoxCheerLoop	;MOVING ATTACKING 
		ModelCondition = Required:EMOTION_TAUNTING		Excluded:DYING ENGAGED	Sound:EmotionHaradrimVoxTauntLoop	;MOVING ATTACKING
		ModelCondition = Required:RAISING_FLAG			Excluded:DYING ENGAGED	Sound:EmotionHaradrimVoxTauntLoop
		;pointing in LGAS
	End

    ;#include "..\..\..\includes\StandardUnitEvaEvents.inc"
	//EvaEventDieOwner				= GroupHaradrimDie		//Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
										//For deaths you can respawn from, use the DeathFX

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			  // Tie into LargeGroupAudio system
		Key = Humanoid_Male Man Man_Male Haradrim_Archer
	End	

	// *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT ARCHER ATTACK_NEEDS_LINE_OF_SIGHT GRAB_AND_DROP
 
	Body = ActiveBody ModuleTag_02
		MaxHealth         = MORDOR_HARADRIM_HEALTH                  ;BALANCE Orc Archer Health
		MaxHealthDamaged  = MORDOR_HARADRIM_HEALTH_DAMAGED
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
 
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		CanAttackWhileContained		= Yes
		MaxCowerTime				= 5000
		MinCowerTime				= 3000
		AttackPriority				= 	AttackPriority_Archer
		AILuaEventsList				=	HaradrimArcherFunctions		
		BurningDeathTime			=	BURNINGDEATH_DURATION_INFANTRY
	End

	LocomotorSet
		Locomotor     = HumanLocomotor
		Condition     = SET_NORMAL
		Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End
  
  	Behavior = AimWeaponBehavior AimWeaponModuleTag
		AimLowThreshold  = -0.15
		AimHighThreshold =  0.15
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -KNOCKBACK
		SinkDelay = 3000
		SinkRate = 0.60     ; in Dist/Sec
		DestructionDelay = 10000
		Sound = INITIAL ManEvilGenericVoiceDie
	End
 
	Behavior = SquishCollide ModuleTag_06
		//nothing
	End
 
	Behavior = SlowDeathBehavior ModuleTag_07
		// Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes			= NONE +KNOCKBACK
		SinkDelay			= 3000
		SinkRate			= 0.80     // in Dist/Sec
		DestructionDelay	= 10000
		Sound				= INITIAL ManEvilGenericVoiceDie
	End
 
	Behavior = BezierProjectileBehavior ModuleTag_08 // Module starts asleep, and wakes up when thrown.
		FirstHeight					= 24	// Height of Bezier control points above highest intervening terrain
		SecondHeight				= 24
		FirstPercentIndent			= 30%	// Percentage of shot distance control points are placed
		SecondPercentIndent			= 70%
		TumbleRandomly				= Yes

		CrushStyle					= Yes	// I don't detonate, I just hit
		DieOnImpact					= Yes
		BounceCount					= 1		// When I hit the ground, I'll arc again
		BounceDistance				= 40	// this far
		BounceFirstHeight			= 16	// Height of Bezier control points above highest intervening terrain
		BounceSecondHeight			= 16
		BounceFirstPercentIndent	= 20%	// Percentage of shot distance control points are placed
		BounceSecondPercentIndent	= 80%

		GroundHitFX       = FX_ThrownRockGroundHit
		GroundBounceFX    = FX_ThrownRockBounceHit
	End
	  
	//;;; UPGRADES ;;;;
	// Fire arrow upgrade
	Behavior = WeaponSetUpgrade ModuleTag_FireArrowParticlesAndLegalityUpgrade
		TriggeredBy		= Upgrade_MordorFireArrows
	End	
	
	// Heavy Armor upgrade
	Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade
		TriggeredBy = Upgrade_MordorHeavyArmor
		ArmorSetFlag			= PLAYER_UPGRADE
	End

	Behavior = SubObjectsUpgrade Armor_Upgrade				; Added for BFME Expansion
		TriggeredBy		= Upgrade_MordorHeavyArmor
		UpgradeTexture		= MUHaradim.tga 0 MUHaradim_HA.tga
		RecolorHouse		= Yes
	End

	// Switch arrows being displayed.
	Behavior = SubObjectsUpgrade ModuleTag_FireArrowSwapUpgrade
		TriggeredBy		= Upgrade_MordorFireArrows
		ShowSubObjects	= ArrowNock FireArowTip
	End	
	
	Behavior = SubObjectsUpgrade ModuleTag_HeavyArmorUpgrade
		TriggeredBy = Upgrade_MordorHeavyArmor
		UpgradeTexture	= MUHaradim.tga 0 MUHaradim_HA.tga
		UpgradeTexture	= MUHaradim_M.tga 0 MUHaradim_M_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = FireArowTip
	End
	
  	Behavior = DualWeaponBehavior ModuleTag_09
  		SwitchWeaponOnCloseRangeDistance = 40
  	End

	Geometry			= CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight		= 19.2
	GeometryIsSmall		= Yes
	
	Shadow			= SHADOW_DECAL
	ShadowSizeX		= 14;
	ShadowSizeY		= 14;
	ShadowTexture	= ShadowI;
End


;------------------------------------------------------------------------------
; 
;//These guys are stuck in the barricade can't move and can't be attacked
;
ChildObject EasterEggArcherContained EasterEggArcher

	Draw = W3DHordeModelDraw ModuleTag_01
		StaticModelLODMode		= Yes // Will append M or L to the skin name depending on GameLOD
		OkToChangeModelColor	= Yes

		WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.	  
		  
		DefaultModelConditionState
			Model = MUHaradim_SKN
			Skeleton = MUHaradim_SKL
			WeaponLaunchBone = PRIMARY ARRROW
			WeaponLaunchBone = TERTIARY ARRROW
			WeaponLaunchBone = QUINARY ARRROW
		End

		IdleAnimationState
			Animation = IDLA
				AnimationName = MUHaradim_IDLA
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
				AnimationPriority = 25
			End
			Animation = IDLB
				AnimationName = MUHaradim_IDLB
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
			End
			Animation = IDLC
				AnimationName = MUHaradim_IDLC
				AnimationMode = ONCE
	    		AnimationBlendTime = 10
			End
			StateName = Idle
			BeginScript
				CurDrawableShowSubObject("arrrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Idle") end
			EndScript			
		End
	 
		AnimationState = THROWN_PROJECTILE
			Animation = Thrown
				AnimationName = MUHaradim_FLYA
				AnimationMode = LOOP
			End
			Animation = Thrown
				AnimationName = MUHaradim_FLYB
				AnimationMode = LOOP
			End
			Animation = Thrown
				AnimationName = MUHaradim_FLYC
				AnimationMode = LOOP
			End
		End

		AnimationState = STUNNED_FLAILING
 			Animation = Flying
				AnimationName = MUHaradim_FLYA
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
 			Animation = Flying
				AnimationName = MUHaradim_FLYB
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
 			Animation = Flying
				AnimationName = MUHaradim_FLYC
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags = RANDOMSTART
		End

		AnimationState			= DYING BURNINGDEATH
			Animation
				AnimationName	= MUHaradim_DIEA
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
			Animation
				AnimationName	= MUHaradim_DIEB
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
			Animation
				AnimationName	= MUHaradim_DIEC
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
		End

		AnimationState = DYING SPLATTED
 				Animation = Splattered_On_Ground
					AnimationName = MUHaradim_LNDA
					AnimationMode = ONCE
				End
				EnteringStateFX = FX_HaradrimHitGround
		End

		AnimationState = DYING AFLAME
			Animation = Flaming_Death_1
				AnimationName = MUHaradim_DIEA
				AnimationMode = ONCE
			End
			Animation = Flaming_Death_2
				AnimationName = MUHaradim_DIEB
				AnimationMode = ONCE
			End
			Animation = Flaming_Death_2
				AnimationName = MUHaradim_DIEC
				AnimationMode = ONCE
			End
			ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
		End

		AnimationState = DYING
			Animation = Dying_1
				AnimationName = MUHaradim_DIEA
				AnimationMode = ONCE
			End
			Animation = Dying_2
				AnimationName = MUHaradim_DIEB
				AnimationMode = ONCE
			End
			Animation = Dying_2
				AnimationName = MUHaradim_DIEC
				AnimationMode = ONCE
			End
		End

		//DOESN'T EXIST
		//AnimationState = TRANSPORT_MOVING
		//	Animation = wobbling_on_transport
		//		AnimationName = MUHaradim_IDLD
		//	    AnimationMode = LOOP
		//      AnimationBlendTime  = 15
		//	End
		//End
	    
		// --- stunned anims
	    
		AnimationState = STUNNED_STANDING_UP
 				Animation = Standing_Back_Up
					AnimationName = MUHaradim_GTPA
			AnimationMode = ONCE_BACKWARDS
			AnimationSpeedFactorRange = 1.5 1.5
				End
		End
	    

		AnimationState = STUNNED
 				Animation = Splattered_On_Ground
					AnimationName = MUHaradim_LNDA
					AnimationMode = ONCE
				End
				EnteringStateFX = FX_HaradrimHitGround
		End

		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= MUHaradim_MFDA
				AnimationMode	= LOOP
				Distance		= 30
			End
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUHaradim_IDLA
				AnimationMode				= LOOP
			End
		End

	; ladder climbing animations
	AnimationState = MOVING CLIMBING BACKING_UP
		Animation = Climbing_Down
			AnimationName = MUHaradim_CLMA
			AnimationMode = LOOP_BACKWARDS
			AnimationSpeedFactorRange = 2.0 2.0
		End
    End

    AnimationState = MOVING CLIMBING
		Animation = Climbing_Up
			AnimationName = MUHaradim_CLMA
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 2.0 2.0
		End
    End

		AnimationState = MOVING DAMAGED AFLAME
			Animation = Moving_Damaged
				AnimationName = MUHaradim_MFDA
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
		End

		AnimationState = MOVING AFLAME
			Animation = Moving
				AnimationName = MUHaradim_MFDA
				AnimationMode = LOOP
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
		End

	//	AnimationState = MOVING DAMAGED
	//		Animation = Moving_Damaged
	//			AnimationName = MUHaradim_IWKA
	//		    AnimationMode = LOOP
	//		End
	//		Flags               = RANDOMSTART
	//		ParticleSysBone     = None InfantryDustTrails
	//  End

;These units are on the mumakil and cannot run anywhere
;
;		AnimationState = MOVING EMOTION_TERROR
;			Animation = MovingA
;				AnimationName = MUHaradim_RUNC
;				AnimationMode = LOOP
;			End
;			Flags               = RANDOMSTART
;			ParticleSysBone     = None InfantryDustTrails
;		End
			    
		AnimationState        = MOVING WANDER
			Animation           = WLKA
				AnimationName     = MUHaradim_WLKA
				AnimationMode     = LOOP
			End
			Animation           = WLKB
				AnimationName     = MUHaradim_WLKB
				AnimationMode     = LOOP
			End
		End
		
		AnimationState				= MOVING BACKING_UP
			Animation				= BackingUp
				AnimationName		= MUHaradim_BAKA
				AnimationMode		= LOOP
			End
			Animation				= BackingUp
				AnimationName		= MUHaradim_BAKB
				AnimationMode		= LOOP
			End
			Animation				= BackingUp
				AnimationName		= MUHaradim_BAKC
				AnimationMode		= LOOP
			End
			Flags = RANDOMSTART
		End

; These units are on a mumakil and cannot run anywhere
;		
;		AnimationState = MOVING
;			Animation = MovingA
;				AnimationName = MUHaradim_RUNA
;				AnimationMode = LOOP
;			End
;			Animation = MovingB
;				AnimationName = MUHaradim_RUNB
;				AnimationMode = LOOP
;			End
;			Flags               = RANDOMSTART
;			ParticleSysBone     = None InfantryDustTrails
;		End
	    
	    
		AnimationState					=	FIRING_OR_PREATTACK_E
			Animation
				AnimationName			=	MUHaradim_ATKA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 2.3 2.3
			End
		End
		
		AnimationState					=	 FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
			Animation					=	ATKD
				AnimationName			=	MUHaradim_ATKD 
				AnimationMode			=	ONCE
				UseWeaponTiming			=	Yes
			End
		End

//---------------------------------------------------
		;New style firing
		AnimationState						= PREATTACK_A 
			StateName						= STATE_Firing
			Animation						= ReadyToDrawn
				AnimationName				= MUHaradim_ATA1
				AnimationMode				= ONCE
//				UseWeaponTiming				= Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.5 1.5		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 10			
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= FIRING_OR_RELOADING_A
			StateName						= STATE_Firing
			Animation						= OneFrameOfShooting
				AnimationName				= MUHaradim_ATA2
				AnimationMode				= ONCE
//				UseWeaponTiming				= Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.0 1.0		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 0				// Must be 0 blend time otherwise the arrow will linger for the duration of the blend!
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= PREATTACK_C
			StateName						= STATE_Firing
			Animation						= ReadyToDrawn
				AnimationName				= MUHaradim_ATA1
				AnimationMode				= ONCE
//				UseWeaponTiming				= Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.5 1.5		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 10			
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End

		AnimationState						= FIRING_OR_RELOADING_C
			StateName						= STATE_Firing
			Animation						= OneFrameOfShooting
				AnimationName				= MUHaradim_ATA2
				AnimationMode				= ONCE
//				UseWeaponTiming				= Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange	= 1.0 1.0   		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime			= 0				// Must be 0 blend time otherwise the arrow will linger for the duration of the blend!
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		;End New style firing

//-------- Persistant firing (keep bow drawn ) ------------
		AnimationState					= CONTINUOUS_FIRE_MEAN
			StateName					=	STATE_Firing
			Animation					=	HangFrameWhileCoasting
				AnimationName			=	MUHaradim_ATA2
				AnimationMode			=	MANUAL
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		
		AnimationState						= CONTINUOUS_FIRE_SLOW
			StateName						= STATE_Idle
			Animation						= PutAwayArrow
				AnimationName				= MUHaradim_ATA3
				AnimationMode				= ONCE
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End
		
		AnimationState = PASSENGER
			Animation = Wiggling
				AnimationName = MUHaradim_FLLA
				AnimationMode = LOOP
			End
		End
	    
		AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = MUHaradim_TNTA
				AnimationMode = LOOP
			End
			Animation = Chant
				AnimationName = MUHaradim_TNTB
				AnimationMode = LOOP
			End
			Animation = Chant
				AnimationName = MUHaradim_TNTC
				AnimationMode = LOOP
			End
		End
				
		//-emotions--
		AnimationState							= EMOTION_AFRAID
			Animation							= FERA
				AnimationName					= MUHaradim_FERA
				AnimationMode					= LOOP
			End
			Animation							= FERA
				AnimationName					= MUHaradim_FERB
				AnimationMode					= LOOP
			End
			Animation							= FERA
				AnimationName					= MUHaradim_FERC
				AnimationMode					= LOOP
			End
			Flags = RANDOMSTART
		End
		
		AnimationState							= EMOTION_TAUNTING
			Animation							= TNTA
				AnimationName					= MUHaradim_TNTA
				AnimationMode					= LOOP
			End
			Animation							= TNTA
				AnimationName					= MUHaradim_TNTB
				AnimationMode					= LOOP
			End
			Animation							= TNTA
				AnimationName					= MUHaradim_TNTC
				AnimationMode					= LOOP
			End
		End
		
		AnimationState							= EMOTION_POINTING
			Animation							= Pointing1A
				AnimationName					= MUHaradim_PNTA
				AnimationMode					= LOOP
			End
		End
		AnimationState							= EMOTION_POINTING
			Animation							= Pointing1B
				AnimationName					= MUHaradim_PNTB
				AnimationMode					= LOOP
			End
		End
		AnimationState							= EMOTION_POINTING
			Animation							= Pointing1C
				AnimationName					= MUHaradim_PNTC
				AnimationMode					= LOOP
			End
		End

		AnimationState							= EMOTION_CELEBRATING
			Animation                           = CHRA
				AnimationName					= MUHaradim_CHRA
				AnimationMode					= ONCE
			End
			Animation                           = CHRA
				AnimationName					= MUHaradim_CHRB
				AnimationMode					= ONCE
			End
			Animation                           = CHRA
				AnimationName					= MUHaradim_CHRC
				AnimationMode					= ONCE
			End
		End

		AnimationState				=	SELECTED
			SimilarRestart			=   Yes
			Animation				=	AtAttention
				AnimationName		=	MUHaradim_ATNB
				AnimationMode		=	LOOP
			End
			StateName				= Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("Idle_to_Selected") end
			EndScript
		End		

		;------------ TRANSITION ANIMS ----------------
		
		TransitionState       = Selected_to_Idle
			Animation           = ATNE
				AnimationName		=	MUHaradim_ATNC
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange	= 2.0 2.0
			End
		End
		
		TransitionState       = Idle_to_Selected
			Animation           = ATND
				AnimationName     = MUHaradim_ATNA
				AnimationMode   =	ONCE
				AnimationSpeedFactorRange	= 2.0 2.0
			End
		End
				
	End
	
	VisionSide	= 100%
	VisionRear	= 100%

	; No SCORE
	KindOf = PRELOAD IMMOBILE UNATTACKABLE CAN_CAST_REFLECTIONS NOT_AUTOACQUIRABLE INFANTRY ARCHER ATTACK_NEEDS_LINE_OF_SIGHT HIDE_IF_FOGGED

	LocomotorSet
		Locomotor = FloatingCatapultLocomotor
		Condition = SET_NORMAL
		Speed     = 0
	End

End

;////////////////////////////////////////////////////////////////////////////////
Object EasterEggArcherHorde

  	// This is required for garrisoned objects - please put in all objects.
	ButtonImage		= WOR_HaradrimArcher
	SelectPortrait	= UPMordor_Haradrim

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY
		DefaultModelConditionState
			Model = None //InvisHrdeTmp5x2
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkMUHLa
		End
	End
	
	Side			= Mordor
	EditorSorting		= UNIT
	EmotionRange		= EMOTION_CHEER_RADIUS
	DisplayName		= OBJECT:HordeMordorHaradrimArcher
	DisplayNameStrategic 	= CONTROLBAR:LW_Unit_MordorHaradrimArcherHorde
	DescriptionStrategic 	= CONTROLBAR:LW_ToolTip_MordorHaradrimArcherHorde
	
	WeaponSet
		Conditions	= None 
		Weapon		= PRIMARY    HaradrimArcherMissileHordeRangefinder
		Weapon		= TERTIARY   HaradrimArcherMissileHordeRangefinderBombard
		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
	End

	BuildCost 		= MORDOR_HARADRIM_BUILDCOST
	BuildTime 		= MORDOR_HARADRIM_BUILDTIME
	
	ShroudClearingRange 	= MORDOR_HARADRIM_SHROUD_RANGE  
	     
	VisionRange 		= MORDOR_HARADRIM_HORDE_VISION_RANGE
	VisionSide 		= 50%
	VisionRear 		= 25%
	MaxVisionBonusPercent 	= 300%
	VisionBonusTestRadius 	= 200
	VisionBonusPercentPerFoot = 1.0%
	
	CrushableLevel		= 0		// What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel		= 0		// What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	UseCrushAttack 		= No		; Archer hordes cannot crush or Bombard will not work
	
	CommandPoints		= 72		; originally 60
	CommandSet		= MordorHaradrimArcherHordeCommandSet
		
	FormationWidth		= 2 		// Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth		= 1 		// Depth it occupies in formations. Current choices are 1 or 2.
	
	TransportSlotCount	= TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf			= SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE ARCHER MELEE_HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND CAN_USE_SIEGE_TOWER;UNATTACKABLE 
	
	ThreatLevel = MORDOR_HARADRIM_ARCHER_HORDE_THREAT
	ThreatBreakdown MordorHaradrimArcherHorde_DetailedThreat
		AIKindOf = ARCHER
	End
	
	;#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	;#include "..\..\..\includes\CaptureBuilding.inc"
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate	= ArcherHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate		= 500
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		AILuaEventsList			= InfantryFunctions
		AttackPriority			= AttackPriority_Archer  
		CanAttackWhileContained		= Yes  			; Can fire out of garrisoned building		
	End

	Behavior = HordeContain ModuleTag_HordeContainOverride
		ObjectStatusOfContained 	= 
		InitialPayload			= MordorHaradrimArcher 12
		Slots				= 12
		PassengerFilter			= NONE +INFANTRY
		ShowPips			= No
		ThisFormationIsTheMainFormation = yes	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset			= X:2 Y:2
		MeleeBehavior 			= Amoeba
		End
		
		// Banner Carrier info		
		BannerCarriersAllowed	= MordorBannerOrc					// types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorHaradrimArcher		Pos:X:40.0 Y:0.0		; (DEFAULT) position of banner carrier for archer horde
		
		; Positions for 5
		RandomOffset = X:0 Y:-12
		
		RankInfo = RankNumber:1 UnitType:MordorHaradrimArcher Position:X:0 Y:12	Position:X:0 Y:-12	Position:X:0 Y:-36	Position:X:0 Y:36	Position:X:0 Y:-60 	Position:X:0 Y:60 
		RankInfo = RankNumber:2 UnitType:MordorHaradrimArcher Position:X:20 Y:12	Position:X:15 Y:-12	Position:X:20 Y:-36	Position:X:20 Y:36	Position:X:20 Y:-60	Position:X:20 Y:60  


;		BannerCarrierPosition	= UnitType:MordorHaradrimArcher	Pos:X:40.0 Y:0.0	// (DEFAULT) position of banner carrier for archer horde
		
		
;		RankInfo = RankNumber:1 UnitType:MordorHaradrimArcher Position:X:0 Y:0	Position:X:0 Y:25	Position:X:0 Y:-25	Position:X:0 Y:50	Position:X:0 Y:-50 
;		RankInfo = RankNumber:2 UnitType:MordorHaradrimArcher Position:X:20 Y:0	Position:X:15 Y:25	Position:X:20 Y:-25	Position:X:20 Y:50	Position:X:20 Y:-50 

		
		MeleeAttackLeashDistance	= 25	// How far the hordes can move from the center of the horde when melee attacking.		
		RanksToReleaseWhenAttacking 	= 1 2
	End
  
	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	INFANTRY_TAUNT_POINT_RADIUS		// max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	// how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf			=	EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt				=	EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		=	150
		FearScanDistance		=	ARCHER_FEAR_SCAN_RADIUS

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   	BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End		
	
	LocomotorSet
		Locomotor     = NormalRangedHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = NORMAL_FOOT_FAST_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy		= Upgrade_MordorBasicTraining
		LevelsToGain		= 1
		LevelCap		= 2
	End

	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
		TriggeredBy		= Upgrade_MordorFireArrows
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
		TriggeredBy		= Upgrade_MordorHeavyArmor
	End

	//Barbed Arrows
	Behavior = SpecialPowerModule ModuleTag_LongShot
		SpecialPowerTemplate		= SpecialAbilityHaradrimArcherBarbedArrow
		UpdateModuleStartsAttack	= Yes
		StartsPaused		  	= No
		;InitiateSound			= HaradrimVoiceAttackCharge	;this didn't work
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate   
		SpecialPowerTemplate    	= SpecialAbilityHaradrimArcherBarbedArrow
		; this has to be longer than the weapon firing time on the members or
		; else the horde will fire its regular weapon and blow away the members' ai.
		PackTime			= 3000										
		StartAbilityRange		= #SUBTRACT( MORDOR_HARADRIM_BOW_RANGE 100 )
		SpecialWeapon			= HaradrimBarbedArrowRangeFinder
		ApproachUntilMembersInRange	= Yes
	End
	
	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
		SpecialAbility = SpecialAbilityHaradrimArcherBarbedArrow
	End
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End

	
	/////////////////////
	// AISpecialPowers
	/////////////////////
	
	Behavior = AISpecialPowerUpdate MordorHaradrimArcherHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	Behavior = AISpecialPowerUpdate BarbedArrowsAI
		CommandButtonName = Command_HaradrimArcherBarbedArrowAbility
		SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
	End

	

	
	Geometry		= BOX
	GeometryMajorRadius 	= 15.0
	GeometryMinorRadius 	= 65.0
	GeometryHeight		= 12.0
	GeometryIsSmall		= No
	
    	Shadow			= SHADOW_DECAL
    	ShadowSizeX		= 23;
    	ShadowSizeY		= 23;
   	ShadowTexture		= ShadowI;


	// *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Archer
	AutoResolveCombatChain = AutoResolve_ArcherCombatChain
	
	AutoResolveBody = AutoResolve_MordorHaradrimArcherHordeBody

	AutoResolveArmor
		RequiredUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_MordorHaradrimArcherHeavyArmor
	End

	AutoResolveArmor
		ExcludedUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_MordorHaradrimArcherArmor
	End

	AutoResolveWeapon
		RequiredUpgrades = Upgrade_MordorFireArrows
		Weapon = AutoResolve_MordorHaradrimArcherUpgradedWeapon
	End

	AutoResolveWeapon
		ExcludedUpgrades = Upgrade_MordorFireArrows
		Weapon = AutoResolve_MordorHaradrimArcherWeapon
	End
	
	WorldMapArmoryUpgradesAllowed = Upgrade_MordorBasicTraining Upgrade_MordorFireArrows Upgrade_MordorHeavyArmor
End

;////////////////////////////////////////////////////////////////////////////////

ChildObject EasterEggArcherHordeContained EasterEggArcherHorde
	Behavior = HordeContain ModuleTag_HordeContainOverride
		ObjectStatusOfContained = 
		InitialPayload = EasterEggArcherContained 6
		Slots = 6
		PassengerFilter = NONE +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = yes	;Used to determine which armorset to use (and anything else we want!)
		RandomOffset=X:0 Y:0
		
		; Banner Carrier info		
		
		RankInfo = RankNumber:1 UnitType:EasterEggArcherContained Position:X:34 Y:8		Position:X:34 Y:-7		Position:X:34 Y:23		Position:X:34 Y:-22		Position:X:34 Y:38		Position:X:34 Y:-37

		
		
		MeleeAttackLeashDistance = 25; How far the hordes can move from the center of the horde when melee attacking.		
		RanksToReleaseWhenAttacking = 1
	End

End


;------------------------------------------------------------------------------
Object EasterEggEgg
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = None
		End
	End
	KindOf = INERT IMMOBILE UNATTACKABLE
	
	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth = 1
	End
	Behavior = LifetimeUpdate ModuleTag_HatchTrigger
		MinLifetime = 0.0
		MaxLifetime = 0.0
	End
	Behavior = SlowDeathBehavior ModuleTag_HatchProcess
		DestructionDelay	= 8000
		FX					= INITIAL FX_BalrogSummoningStart
		FX					= MIDPOINT FX_BalrogSummoningFinish			; Midpoint as we need to have a delay between the summon and explosion.
		OCL					= MIDPOINT OCL_EasterEggSummoningFinish
		Weapon				= MIDPOINT BalrogSummoning
	End
End

;// A placeholder is needed to prevent things from being summoned into the balrog while it's being summoned.
;// This won't prevent things from pathing through us but neither will the balrog itself.
Object EasterEggEggPlaceHolder
	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = None
		End
	End
	KindOf =  IMMOBILE UNATTACKABLE NOT_AUTOACQUIRABLE
	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth = 1
	End
	Behavior = LifetimeUpdate ModuleTag_HatchTrigger
		MinLifetime = 8000
		MaxLifetime = 8000
	End
	Geometry			= CYLINDER
	GeometryMajorRadius = 30.0
	GeometryHeight		= 70.0
	GeometryIsSmall		= No
End